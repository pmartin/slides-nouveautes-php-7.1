<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8">

		<title>Les nouveaut√©s de PHP 7.1</title>

		<meta name="description" content="Slides utilis√©s pendant ma pr√©sentation ¬´ Les nouveaut√©s de PHP 7.1 ¬ª, en 2016">
		<meta name="author" content="Pascal MARTIN">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="css/custom.css">
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<script src="lib/js/jquery.min.js" type="text/javascript"></script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<section>
					<section>
						<h1>
							Nouveaut√©s PHP&nbsp;7.1
						</h1>
						<h2>
							+&nbsp;rappels PHP&nbsp;7.0
						</h2>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
					</section>

					<!--
	                <section id="info-notes-presentateur">
	                    <p>
	                        <strong>Appuyez sur <kbd>[s]</kbd> pour ouvrir les <em>notes pr√©sentateur</em> dans une nouvelle fen√™tre.</strong>
	                    </p>
	                    <aside class="notes">
	                        <p>Je vais essayer d'ajouter ici, pour certains slides, des points que j'ai pu donner √† l'oral lors de la pr√©sentation et/ou qui ne sont pas explicitement √©crits sur les slides ‚Äî afin de les rendre plus utiles aux lecteurs qui n'auraient pas assist√© √† la pr√©sentation.</p>
	                        <p>Le style sera volontairement un peu <em>oral</em>, se rapprochant un peu de ce qui s'est dit lors de la pr√©sentation <em>live</em>.</p>
	                    </aside>
	                </section>

	                <section id="use-space-key">
	                    <p>
	                        <strong>Utilisez la touche <kbd>[ESPACE]</kbd><br />pour passer au slide <em>suivant</em>.</strong>
	                    </p>
	                </section>
	                -->
				</section>



                <section>
					<section>
	                    <h1>PHP 5.x&nbsp;+&nbsp;1</h1>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>On en est o√π ?</h2>
	                    <ul>
							<li>
								PHP 5.6
								<ul>
									<li>Derni√®re  version 5.x</li>
									<li>Publi√©e le 28 ao√ªt 2014</li>
								</ul>
							</li>
	                    	<li>
								PHP 7.0
								<ul>
									<li>Publi√©e le 3 d√©cembre 2015</li>
								</ul>
							</li>
	                    	<li>
								PHP 7.1
								<ul>
									<li>Feature freeze</li>
									<li>Publication : fin 2016 ?</li>
								</ul>
							</li>
	                    </ul>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Versions support√©es</h2>
						<img class="stretch" src="images/supported-versions.png" alt="Supported Versions" />
						<p>
	                    	<a href="https://secure.php.net/supported-versions.php">php.net/supported-versions.php</a>
	                    </p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<!-- Introduction -->
				</section>


				<section>
					<section>
	                    <h1>PHP 7.0</h1>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Null Coalesce Operator</h2>
	                    <pre><code data-trim>
$username = isset($_GET['user']) ? $_GET['user'] : 'nobody';
	                    </code></pre>
	                    <pre class="fragment"><code data-trim>
$username = $_GET['user'] ?? 'nobody';
	                    </code></pre>
	                    <pre class="fragment"><code data-trim>
$model = Model::get($id) ?? $default_model;
	                    </code></pre>
	                    <pre class="fragment"><code data-trim>
function foo() {
    echo "executed!", PHP_EOL;
}
var_dump(true ?? foo());
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li><a href="https://wiki.php.net/rfc/isset_ternary">Null Coalesce Operator</a></li>
	                            <li>On a tous utilis√© la premi√®re √©criture... Qui est longue et on se r√©p√™te... La seconde est plus sympa, non&nbsp;?</li>
	                            <li>Prend la valeur de gauche&nbsp;; ou celle de droite si celle de gauche √©tait <em>fausse</em></li>
	                            <li>Peut √™tre utilis√© pour faire du short-circuit&nbsp;!</li>
	                        </ul>
	                    </aside>
	                </section>

					<section>
	                    <h2>Unicode Codepoint Escape Syntax</h2>
	                    <pre><code data-trim>
$ php -r 'echo "I \u{2665} PHP!\n";'
I ‚ô• PHP!
	                    </code></pre>
	                    <pre class="fragment"><code data-trim>
$ php -r 'echo "\u{1F408} \u{1F431} \u{1F638} \u{1F639} \u{1F63A} \u{1F63B} \u{1F63C} \u{1F63D} \u{1F63E} \u{1F63F} \u{1F640} - so cute!!!\n";'
üêà üê± üò∏ üòπ üò∫ üòª üòº üòΩ üòæ üòø üôÄ - so cute!!!
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/unicode_escape">wiki.php.net/rfc/unicode_escape</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section class="section section-php7 section-php7-part1" data-state="section-php7-part1">
	                    <h2>Type hints scalaires</h2>
	                    <pre><code data-trim>
&lt;?php
function add(int $a, int $b) {
    return $a + $b;
}
	                    </code></pre>
	                    <pre><code data-trim>
var_dump( add(10, 20) );
var_dump( add('10', '20') );
	                    </code></pre>
	                    <pre><code data-trim>
int(30)
int(30)
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Approche <em>souple</em>, par d√©faut</li>
	                            <li><code>"20"</code> peut √™tre converti en entier et l'est donc.</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section class="section section-php7 section-php7-part1" data-state="section-php7-part1">
	                    <h2>Type hints scalaires</h2>
	                    <pre><code data-trim>
try {
    var_dump( add(10, 'abc') );
}
catch (TypeError $e) {
    var_dump( $e-&gt;getMessage() );
}
	                    </code></pre>
	                    <pre><code data-trim>
string(148) &quot;Argument 2 passed to add()
    must be of the type integer, string given,
    called in .../test-01.php on line 12&quot;
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li><code>"abc"</code> ne peut pas √™tre converti en entier. Donc erreur</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Types de retour</h2>
	                    <pre><code data-trim>
function add(int $a, int $b) : int {
    return $a + $b;
}
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li><a href="https://wiki.php.net/rfc/return_types">Return Types</a></li>
	                            <li>Lev√©e d'erreur si la fonction essaye de retourner autre chose que le type sp√©cifi√© dans sa d√©claration</li>
	                            <li>Surtout utile en d√©veloppement / test&nbsp;? Analyse statique&nbsp;!</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Types de retour</h2>
	                    <pre><code data-trim>
function get_config() : array {
    return 42;
}
get_config();
	                    </code></pre>

	                    <pre><code data-trim>
Fatal error: Uncaught TypeError:
    Return value of get_config() must be
    of the type array, integer returned
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Exemple d'erreur&nbsp;: la fonction a essay√© de retourner un entier, alors qu'elle √©tait cens√©e retourner un array.</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Typage strict</h2>
	                    <pre><code data-trim>
&lt;?php
declare(strict_types=1);

function add(int $a, int $b) {
    return $a + $b;
}

add(10, '20');
	                    </code></pre>
	                    <pre><code data-trim>
Fatal error: Uncaught TypeError:
    Argument 2 passed to add()
    must be of the type integer, string given
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Optionnellemnt, avec une directive <code>declare()</code> (tout en haut du fichier et s'applique pour l'ensemble du fichier), on peut passer en mode de typage strict.</li>
	                            <li><code>"20"</code> est une chaine, pas un entier, donc erreur</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Souple / Strict&nbsp;?</h2>
	                    <ul>
	                        <li>
	                            Param√®tres&nbsp;: au choix de l'appelant
	                            <ul>
	                                <li>Sait si il manipule des types <em>souples</em> ou <em>stricts</em></li>
	                            </ul>
	                        </li>
	                        <li>
	                            Retour&nbsp;: au choix de l'appel√©
	                            <ul>
	                                <li>Sait si la fonction qu'il a √©crite utilise des types <em>souples</em> ou <em>stricts</em></li>
	                            </ul>
	                        </li>
	                    </ul>
	                    <aside class="notes">
	                    </aside>
	                </section>

	                <section>
	                    <h2>Souple / Strict&nbsp;?</h2>
	                    <ul>
	                        <li>Les donn√©es sont des types indiqu√©s.</li>
	                        <li>D√©termine si des conversions sont ou non <strong>permises</strong>.</li>
	                    </ul>
	                    <aside class="notes">
	                    </aside>
	                </section>

					<section>
	                    <h2>Combined Comparison (Spaceship) Operator</h2>
						<pre><code data-trim>
function order_func($a, $b) {
    return $a &lt;=&gt; $b;
}
	                    </code></pre>
	                    <pre><code data-trim>
function order_func($a, $b) {
    return [$a-&gt;x, $a-&gt;y, $a-&gt;foo]
        &lt;=&gt; [$b-&gt;x, $b-&gt;y, $b-&gt;foo];
}
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/combined-comparison-operator">wiki.php.net/rfc/combined-comparison-operator</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Group use declarations</h2>
	                    <pre><code data-trim>
use Mon\Espace\De\Nom\ClasseAa;
use Mon\Espace\De\Nom\ClasseBb;
use Mon\Espace\De\Nom\ClasseCc;
use Mon\Espace\De\Nom\Enfant\AutreClasse as ClassDd;
	                    </code></pre>
	                    <pre class="fragment"><code data-trim>
use Mon\Espace\De\Nom\ {
    ClasseAa, ClasseBb, ClasseCc,
    Enfant\AutreClasse as ClassDd
};
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Les deux √©critures dont pareil. La seconde est plus courte et moins r√©p√©titive</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Group use declarations</h2>
	                    <pre><code data-trim>
use function Mon\Nom\fonc01;
use const Mon\Nom\CONST01;
use Mon\Nom\Class01;
	                    </code></pre>
	                    <pre><code data-trim>
use Mon\Nom\ {
    function fonc01,
    const CONST01,
    Class01
};
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Marche aussi pour les fonctions et constantes, qu'on peut <em>user</em> depuis PHP 5.4</li>
	                        </ul>
	                    </aside>
	                </section>

					<section>
	                    <h2>Erreurs ‚Üí exceptions</h2>
	                    <ul>
	                        <li>Une partie des erreurs Fatales</li>
	                        <li>internes √† / lev√©es par PHP</li>
	                        <li>sont transform√©es en <code>Error</code></li>
	                        <li>qui peuvent √™tre <em>catch√©es</em></li>
	                    </ul>
	                    <aside class="notes">
	                    </aside>
	                </section>

	                <section>
	                    <h2>Erreurs ‚Üí exceptions</h2>
	                    <pre><code data-trim>
&lt;?php
$obj = null;
try {
    // Ooops !
    $obj-&gt;methode();
}
catch (Error $e) {
    var_dump($e-&gt;getMessage());
}
?&gt;
	                    </code></pre>
	                    <pre><code data-trim>
string(43) &quot;Call to a member function methode() on null&quot;
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Appel d'une m√©thode sur <code>null</code></li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Erreurs ‚Üí exceptions</h2>
	                    <pre><code data-trim>
&lt;?php
$php = &lt;&lt;&lt;'PHP'
$a = 10        // -- Parse error ! -- //
printf("\$a = %d\n", $a);
PHP;

try {
    eval($php);
}
catch (ParseError $e) {
    var_dump($e-&gt;getMessage());
}
?&gt;
	                    </code></pre>
	                    <pre><code data-trim>
string(44) &quot;syntax error, unexpected 'printf' (T_STRING)&quot;
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Erreur de syntaxe dans du code √©valu√© (ou√©, <code>eval()</code> c'est mal)</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Erreurs ‚Üí exceptions</h2>
	                    <pre><code data-trim>
echo &quot;Fichier 1 - avant\n&quot;;
try {
    // Fichier avec une erreur de syntaxe
    include __DIR__ . '/test-06-2.php';
}
catch (Error $e) {
    echo &quot;Error catch&eacute;e : &quot;;
    var_dump($e-&gt;getMessage());
}
echo &quot;Fichier 1 - apr√®s\n&quot;;
	                    </code></pre>
	                    <pre><code data-trim>
Fichier 1 - avant
Error catch√©e : string(42) "syntax error, unexpected '$b' (T_VARIABLE)"
Fichier 1 - apr√®s
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Parse errors peuvent √™tre catch√©es si elles se produisent dans un autre contexte de compilation que le fichier courant.</li>
	                            <li>Dans un fichier inclu, par exemple.</li>
	                            <li>Le fichier courant doit √™tre correct, lui, par contre.</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Erreurs ‚Üí exceptions</h2>
	                    <p>Hi√©rarchie d'erreurs / exceptions</p>
	                    <pre><code data-trim>
interface Throwable
    Exception implements Throwable
        // Toutes les exceptions usuelles
    Error implements Throwable
        AssertionError extends Error
        ParseError extends Error
        TypeError extends Error
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>S√©paration entre les <code>Exception</code>, qui continuent √† se comporter comme avant</li>
	                            <li>Et les <code>Error</code>, qu'on peut d√©sormais catcher en plus</li>
	                            <li>De l'ancien code qui catchait les exceptions ne catchera pas les errors et on garde donc, si on ne change rien, le comportement existant.</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Erreurs ‚Üí exceptions</h2>
	                    <ul>
	                        <li><strong>Une partie</strong> des erreurs <strong>Fatales</strong></li>
	                        <li><strong>internes</strong> √† / lev√©es par PHP</li>
	                    </ul>
	                    <aside class="notes">
	                        <ul>
	                            <li>J'insiste</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Classes anonymes</h2>
	                    <pre><code data-trim>
$obj = new class (&quot;Monde&quot;) {
    protected $qui;

    public function __construct($qui) {
        $this-&gt;qui = $qui;
    }

    public function hello() {
        printf(&quot;Hello, %s !\n&quot;, $this-&gt;qui);
    }
};

var_dump($obj);
$obj-&gt;hello();
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Construction d'un objet √† la vol√©e, sans d√©finir de classe.</li>
	                            <li>On peut user un Trait, impl√©menter une interface, h√©riter d'une autre classe, ...</li>
	                            <li>On ne peut pas s√©rialiser (puisqu'on ne saurait pas vers quoi d√©-s√©rialiser)</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Classes anonymes</h2>
	                    <pre><code data-trim>
object(class@anonymous)#1 (1) {
  [&quot;qui&quot;:protected]=&gt;
  string(5) &quot;Monde&quot;
}
Hello, Monde !
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>La sortie obtenue. bref, √ßa marche.</li>
	                        </ul>
	                    </aside>
	                </section>

					<section>
	                    <h2>Generators et <code>return</code></h2>
	                    <pre><code data-trim>
function plop() {
    yield 100;
    yield 200;
    return 42;
}

foreach (($generator = plop()) as $val) {
    var_dump($val);
}

var_dump( $generator-&gt;getReturn() );
	                    </code></pre>
	                    <pre><code data-trim>
int(100)
int(200)
int(42)
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>PHP&nbsp;5&nbsp;: erreur si <code>return</code> avec valeur</li>
	                            <li><code>getReturn()</code> OK si le generator a termin√©. Sinon, erreur.</li>
	                            <li>Utile quand on veut un <em>r√©sultat</em> √† la fin d'une g√©n√©ration de donn√©es</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Generator Delegation</h2>
	                    <pre><code data-trim>
function test() {
    yield from [10, 20, 30];
}

foreach (test() as $val) {
    var_dump($val);
}
	                    </code></pre>
	                    <pre><code data-trim>
int(10)
int(20)
int(30)
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Depuis un <code>Traversable</code> ou un <code>array</code></li>
	                            <li>Vu que quasiment personne dans la salle n'utilise de generateur, je passe l√†-dessus tr√®s vite&nbsp;: √ßa peut demander un peu de pratique avant d'√™tre compris.</li>
	                        </ul>
	                    </aside>
	                </section>

	                <section>
	                    <h2>Generator Delegation</h2>
	                    <pre><code data-trim>
function sub_generator_1() {
    yield 10;
    yield 20;
}
function sub_generator_2() {
    yield from [ 'aa', 'bb', ];
}
function delegating_generator() {
    yield from sub_generator_1();
    yield from sub_generator_2();
}

foreach (delegating_generator() as $val) {
    var_dump($val);
}
                    </code></pre>
                    <pre><code data-trim>
int(10)
int(20)
string(2) "aa"
string(2) "bb"
	                    </code></pre>
	                    <aside class="notes">
	                        <ul>
	                            <li>Ou depuis un sous-<code>Generator</code></li>
	                            <li>(pareil)</li>
	                            <li>Note to self&nbsp;: peut faire une id√©e d'article de blog...</li>
	                        </ul>
	                    </aside>
	                </section>

					<!-- Rappel PHP 7.0 -->
				</section>


				<section>
					<section>
	                    <h1>PHP 7.1</h1>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Class Constant Visibility</h2>
	                    <pre><code data-trim>
class MaClasse {
    public const MA_PUBLIQUE = 42;
    private const MA_PRIVEE = 1234;
    public function test() {
        var_dump( self::MA_PRIVEE );
    }
}
						</code></pre>
	                    <pre><code data-trim>
var_dump( MaClasse::MA_PUBLIQUE ); // int(42)
(new MaClasse())->test(); // int(1234)
						</code></pre>
						<pre><code data-trim>
// Error: Cannot access private const MaClasse::MA_PRIVEE
var_dump( MaClasse::MA_PRIVEE );
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/class_const_visibility">wiki.php.net/rfc/class_const_visibility</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Void Return Type</h2>
	                    <pre><code data-trim>
function fonc01() {
    printf("%s\n", __FUNCTION__);
}
	                    </code></pre>
	                    <pre><code data-trim>
function fonc02() : void {
    printf("%s\n", __FUNCTION__);
}
	                    </code></pre>
	                    <pre><code data-trim>
function function03() : void {
    printf("%s\n", __FUNCTION__);

    // Fatal error: A void function must not return a value
    return 'plop';
}
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/void_return_type">wiki.php.net/rfc/void_return_type</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Allow specifying keys in <code>list()</code></h2>
	                    <pre><code data-trim>
$array = [
    'glop' => "Hello",
    'plop' => 123456,
    'who' => "World",
];
	                    </code></pre>
	                    <pre><code data-trim>
list (
    'glop' => $a,
    'who' => $b
) = $array;
	                    </code></pre>
	                    <pre><code data-trim>
var_dump($a, $b);
// string(5) "Hello"
// string(5) "World"
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/list_keys">wiki.php.net/rfc/list_keys</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Generalize support of negative string offsets</h2>
	                    <pre><code data-trim>
$str = "Pascal";
var_dump($str[2]);  // string(1) "s"
var_dump($str[-2]); // string(1) "a"
	                    </code></pre>
						<p>PHP 7.0 :</p>
	                    <pre><code data-trim>
string(1) "s"
string(0) ""
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/negative-string-offsets">wiki.php.net/rfc/negative-string-offsets</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Generalize support of negative string offsets</h2>
	                    <pre><code data-trim>
$str = "Pas.al";
$str[-3] = 'c';
var_dump($str);  // string(6) "Pascal"
	                    </code></pre>
						<p>PHP 7.0 :</p>
	                    <pre><code data-trim>
Warning: Illegal string offset:  -3
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/negative-string-offsets">wiki.php.net/rfc/negative-string-offsets</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Generalize support of negative string offsets</h2>
	                    <pre><code data-trim>
var_dump( strpos("Pascal", "c", -5) ); // int(3)
	                    </code></pre>
						<p>PHP 7.0 :</p>
	                    <pre><code data-trim>
Warning: strpos(): Offset not contained in string
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/negative-string-offsets">wiki.php.net/rfc/negative-string-offsets</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Catching Multiple Exception Types</h2>
	                    <pre><code data-trim>
class Plop extends Exception {}
class Blah extends Exception {}
class Another extends Exception {}
	                    </code></pre>
	                    <pre><code data-trim>
try {
    switch (mt_rand(0, 2)) {
        case 0: throw new Plop();
        case 1: throw new Blah();
        case 2: throw new Another();
    }
} catch (Plop | Blah $e) {
    printf("1er catch : %s\n", get_class($e));
} catch (Another $e) {
    printf("2nd catch : %s\n", get_class($e));
}
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/multiple-catch">wiki.php.net/rfc/multiple-catch</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Square bracket syntax for array destructuring assignment</h2>
	                    <pre><code data-trim>
[$a, $b] = [10, 20];
var_dump($a, $b);
// int(10)
// int(20)
	                    </code></pre>
	                    <pre><code data-trim>
['glop' => $glop, 'plop' => $plop] = [
    'plop' => 42,
    'glop' => "Hello",
];
var_dump($plop, $glop);
// int(42)
// string(5) "Hello"
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/short_list_syntax">wiki.php.net/rfc/short_list_syntax</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Nullable Types</h2>
	                    <pre><code data-trim>
function fonc01(?int $a) {
    var_dump($a);
}
	                    </code></pre>
	                    <pre><code data-trim>
fonc01(100); // int(100)
fonc01(null); // NULL
	                    </code></pre>
	                    <pre><code data-trim>
fonc01();
// Error: Too few arguments to function fonc01(), 0 passed
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/nullable_types">wiki.php.net/rfc/nullable_types</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Nullable Types</h2>
						<p>PHP 7.0</p>
	                    <pre><code data-trim>
function fonc01(int $a) {
    var_dump($a);
}
	                    </code></pre>
	                    <pre><code data-trim>
fonc01(100); // int(100)
fonc01(null); // TypeError: Argument 1 passed to
              // fonc01() must be of the type
              // integer, null given
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/nullable_types">wiki.php.net/rfc/nullable_types</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Nullable Types</h2>
	                    <pre><code data-trim>
function fonc02(?int $a, ?int $b) : ?int {
    if ($a === null || $b === null) {
        return null;
    }
    return $a + $b;
}
	                    </code></pre>
	                    <pre><code data-trim>
var_dump( fonc02(10, 20) ); // int(30)
var_dump( fonc02(10, null) ); // NULL
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/nullable_types">wiki.php.net/rfc/nullable_types</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Nullable Types</h2>
						<p>PHP 7.0</p>
	                    <pre><code data-trim>
function fonc02(int $a, $b) : int {
    if ($a === null || $b === null) {
        return null;
    }
    return $a + $b;
}
	                    </code></pre>
	                    <pre><code data-trim>
var_dump( fonc02(10, 20) ); // int(30)
var_dump( fonc02(10, null) ); // TypeError:
    // Return value of fonc02() must be of
    // the type integer, null returned
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/nullable_types">wiki.php.net/rfc/nullable_types</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Closure from callable function</h2>
	                    <pre><code data-trim>
function ma_fonction() {
    var_dump(__FUNCTION__);
}
	                    </code></pre>
	                    <pre><code data-trim>
$closure = Closure::fromCallable('ma_fonction');
$closure();  // string(11) "ma_fonction"
	                    </code></pre>
	                    <pre><code data-trim>
$closure = Closure::fromCallable('plop');
// TypeError: Failed to create closure from callable:
// function 'plop' not found or invalid function name
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/closurefromcallable">wiki.php.net/rfc/closurefromcallable</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Iterable</h2>
	                    <pre><code data-trim>
function fonc01(iterable $data) {
    foreach ($data as $key => $val) {
        // ...
    }
}
	                    </code></pre>
	                    <pre><code data-trim>
fonc01([10, 20, 30]);
fonc01(new SplFixedArray(5));
fonc01(mon_generateur());
	                    </code></pre>
	                    <pre><code data-trim>
fonc01("plop");
// TypeError: Argument 1 passed to fonc01()
// must be iterable, string given
	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/iterable">wiki.php.net/rfc/iterable</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Throw Error in Extensions</h2>
	                    <p>
	                    	TODO
	                    </p>
						<p>
							<a href="https://wiki.php.net/rfc/throw_error_in_extensions">wiki.php.net/rfc/throw_error_in_extensions</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Asynchronous Signal Handling</h2>
	                    <p>
	                    	TODO
	                    </p>
						<p>
							<a href="https://wiki.php.net/rfc/async_signals">wiki.php.net/rfc/async_signals</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<!-- Nouveaut√©s PHP 7.1 -->
				</section>


				<section>
					<section>
	                    <h1>En route vers PHP 8.0 ?</h1>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Deprecate <code>mb_ereg_replace()</code> eval option</h2>
	                    <pre><code data-trim>

	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/deprecate_mb_ereg_replace_eval_option">wiki.php.net/rfc/deprecate_mb_ereg_replace_eval_option</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<section>
	                    <h2>Deprecate (then Remove) Mcrypt</h2>
	                    <pre><code data-trim>

	                    </code></pre>
						<p>
							<a href="https://wiki.php.net/rfc/mcrypt-viking-funeral">wiki.php.net/rfc/mcrypt-viking-funeral</a>
						</p>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<!-- En route vers PHP 8.0 ? -->
				</section>


				<section>
					<section>
	                    <h1>Conclusion</h1>
	                    <aside class="notes">
	                        ul>li*3
	                    </aside>
	                </section>

					<!-- Conclusion -->
				</section>

            </div>

			<div id="footer" class="presentation-details">
                <p>
                    <!--
                    Pascal MARTIN, <a href="http://twitter.com/pascal_martin">@pascal_martin</a> &nbsp;‚Äî juillet 2016
                    -->
                </p>
            </div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
                progress: true,
                history: true,
                center: true,
                theme: 'simple',
                transition: 'none', // default/cube/page/concave/zoom/linear/fade/none
                width: 1280,
                height: 1024,
                slideNumber: true,

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

			// Changement de footer pour afficher les credits de la photo du slide courant
            Reveal.addEventListener('slidechanged', function (event) {
                if ($('aside.notes p.img-attribution', event.currentSlide).length > 0) {
                    $('#footer p').html($('aside.notes p.img-attribution', event.currentSlide).html());
                }
                else {
                    $('#footer p').html("");
                }
            });

        	/*
            // Navigation √† la souris
            window.addEventListener("mousedown", handleClick, false);
            window.addEventListener("contextmenu", handleClick, false);
            function handleClick(e) {
                e.preventDefault();
                if(e.button === 0) Reveal.next();
                if(e.button === 2) Reveal.prev();
            }
            //*/
		</script>
	</body>
</html>
